{# templates/partials/nav.html #}
{# SoHo Pittsburgh — Main Navigation #}

<nav class="site-nav" x-data="{ mobileOpen: false }">

  {# Logo #}
  <a href="{% url 'core:home' %}" class="site-nav__logo">
    {% if settings.logo %}
      <img src="{{ settings.logo.url }}" alt="{{ settings.logo_alt_text }}" style="height:42px;width:auto;">
    {% else %}
      <span>SoHo</span> Pittsburgh
    {% endif %}
  </a>

  {# Desktop Links #}
  <ul class="site-nav__links" style="display:none;" id="desktop-nav">
    <li><a href="{% url 'core:home' %}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">Home</a></li>
    <li><a href="{% url 'core:about' %}" class="{% if request.resolver_match.url_name == 'about' %}active{% endif %}">About</a></li>
    <li>
      <a href="{% url 'menu:full' %}" class="{% if 'menu' in request.resolver_match.url_name %}active{% endif %}">Menu</a>
      {# Dropdown if needed — handled via Alpine #}
    </li>
    <li><a href="{% url 'promotions:list' %}" class="{% if 'promotion' in request.resolver_match.url_name %}active{% endif %}">promotions</a></li>
    <li><a href="{% url 'core:contact' %}" class="{% if request.resolver_match.url_name == 'contact' %}active{% endif %}">Contact</a></li>
    <li>
      <a href="tel:{{ settings.phone|default:'4123217646' }}" class="btn btn-secondary" style="padding: 0.6rem 1.5rem;">
        Reserve
      </a>
    </li>
  </ul>

  {# Mobile Hamburger #}
  <button
    @click="mobileOpen = !mobileOpen"
    class="site-nav__hamburger"
    aria-label="Toggle menu"
    style="display:flex;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:4px;"
  >
    <span style="display:block;width:24px;height:1px;background:var(--color-gold-primary);transition:all 0.25s;" :style="mobileOpen ? 'transform:rotate(45deg) translate(4px,4px)' : ''"></span>
    <span style="display:block;width:24px;height:1px;background:var(--color-gold-primary);transition:all 0.25s;" :style="mobileOpen ? 'opacity:0' : ''"></span>
    <span style="display:block;width:24px;height:1px;background:var(--color-gold-primary);transition:all 0.25s;" :style="mobileOpen ? 'transform:rotate(-45deg) translate(4px,-4px)' : ''"></span>
  </button>

  {# Mobile Dropdown #}
  <div
    x-show="mobileOpen"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-2"
    x-transition:enter-end="opacity-100 translate-y-0"
    style="
      display:none;
      position:absolute;
      top:100%;
      left:0;
      right:0;
      background:rgba(10,10,10,0.98);
      border-top: 1px solid var(--color-gold-deep);
      padding: 1.5rem 2rem;
    "
  >
    <ul style="list-style:none;display:flex;flex-direction:column;gap:1.25rem;">
      <li><a href="{% url 'core:home' %}" style="font-family:var(--font-nav);font-size:0.75rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--color-text-primary);">Home</a></li>
      <li><a href="{% url 'core:about' %}" style="font-family:var(--font-nav);font-size:0.75rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--color-text-primary);">About</a></li>
      <li><a href="#" style="font-family:var(--font-nav);font-size:0.75rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--color-text-primary);">Menu</a></li>
      <li><a href="{% url 'promotions:list' %}" style="font-family:var(--font-nav);font-size:0.75rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--color-text-primary);">promotions</a></li>
      <li><a href="{% url 'core:contact' %}" style="font-family:var(--font-nav);font-size:0.75rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--color-text-primary);">Contact</a></li>
    </ul>
    <div style="margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-dark-gray);">
      <a href="tel:{{ settings.phone|default:'4123217646' }}" class="btn btn-primary" style="width:100%;justify-content:center;">
        {{ settings.phone|default:"(412) 321-7646" }}
      </a>
    </div>
  </div>

</nav>

{# Inject desktop nav via media query logic (Tailwind md: breakpoint) #}
<style>
  @media (min-width: 768px) {
    #desktop-nav { display: flex !important; }
    .site-nav__hamburger { display: none !important; }
  }
</style>
